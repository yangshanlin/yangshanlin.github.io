<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>130&#39;s Blog</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://blog.yangshanlin.cn/"/>
  <updated>2018-08-11T15:31:39.395Z</updated>
  <id>http://blog.yangshanlin.cn/</id>
  
  <author>
    <name>130</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>主题美化</title>
    <link href="http://blog.yangshanlin.cn/2018/08/07/Config-Theme/"/>
    <id>http://blog.yangshanlin.cn/2018/08/07/Config-Theme/</id>
    <published>2018-08-07T05:39:10.000Z</published>
    <updated>2018-08-11T15:31:39.395Z</updated>
    
    <content type="html"><![CDATA[<h1 id="主题配置"><a href="#主题配置" class="headerlink" title="主题配置"></a>主题配置</h1><p>上次主要是对主题的使用作下简答的说明，现在说的是主题的美化，注意此处讨论的主题为<a href="https://github.com/yangshanlin/hexo-theme-tranquilpeak" target="_blank" rel="noopener">Tranquilpeak</a>，如有不适请自行Google。<br><a id="more"></a></p><h2 id="添加live2d"><a href="#添加live2d" class="headerlink" title="添加live2d"></a>添加<code>live2d</code></h2><p>首先安装<code>npm install --save hexo-helper-live2d</code>插件，然后安装<code>npm install live2d-widget-model-xxxx</code>，此处的<code>xxxx</code>代表具体的主题样式，如我采用的<code>live2d-widget-model-koharu</code>，再在hexo的工程下面的<code>_config.yml</code>文件中添加如下代码用于控制模型的显示：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">live2d:</span></span><br><span class="line"><span class="attr">  enable:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">  scriptFrom:</span> <span class="string">local</span></span><br><span class="line"><span class="attr">  model:</span></span><br><span class="line"><span class="attr">    use:</span> <span class="string">live2d-widget-model-koharu</span></span><br><span class="line"><span class="attr">  display:</span></span><br><span class="line"><span class="attr">    position:</span> <span class="string">right</span></span><br><span class="line"><span class="attr">    width:</span> <span class="number">100</span></span><br><span class="line"><span class="attr">    height:</span> <span class="number">200</span></span><br><span class="line"><span class="attr">    vOffset:</span> <span class="bullet">-60</span></span><br><span class="line"><span class="attr">  mobile:</span></span><br><span class="line"><span class="attr">    show:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">    scale:</span> <span class="number">0.5</span></span><br><span class="line"><span class="attr">  react:</span></span><br><span class="line"><span class="attr">    opacityDefault:</span> <span class="number">0.9</span></span><br><span class="line"><span class="attr">    opacityOnHover:</span> <span class="number">0.1</span></span><br></pre></td></tr></table></figure><p>具体的属性可参考：<code>L2Dwidget.js</code>文件。下面列出了安装后能够看到效果的module，自行选择食用。</p><h3 id="live2d-widget-model-chitose"><a href="#live2d-widget-model-chitose" class="headerlink" title="live2d-widget-model-chitose"></a>live2d-widget-model-chitose</h3><img src="/2018/08/07/Config-Theme/live2d-widget-model-chitose.png" title="live2d-widget-model-chitose"><h3 id="llive2d-widget-model-epsilon2-1"><a href="#llive2d-widget-model-epsilon2-1" class="headerlink" title="llive2d-widget-model-epsilon2_1"></a>llive2d-widget-model-epsilon2_1</h3><img src="/2018/08/07/Config-Theme/live2d-widget-model-epsilon2_1.png" title="live2d-widget-model-epsilon2_1"><h3 id="live2d-widget-model-gf"><a href="#live2d-widget-model-gf" class="headerlink" title="live2d-widget-model-gf"></a>live2d-widget-model-gf</h3><img src="/2018/08/07/Config-Theme/live2d-widget-model-gf.png" title="live2d-widget-model-gf"><h3 id="live2d-widget-model-haruto"><a href="#live2d-widget-model-haruto" class="headerlink" title="live2d-widget-model-haruto"></a>live2d-widget-model-haruto</h3><img src="/2018/08/07/Config-Theme/live2d-widget-model-haruto.png" title="live2d-widget-model-haruto"><h3 id="llive2d-widget-model-hibiki"><a href="#llive2d-widget-model-hibiki" class="headerlink" title="llive2d-widget-model-hibiki"></a>llive2d-widget-model-hibiki</h3><img src="/2018/08/07/Config-Theme/live2d-widget-model-hibiki.png" title="llive2d-widget-model-hibiki"><h3 id="live2d-widget-model-hijiki"><a href="#live2d-widget-model-hijiki" class="headerlink" title="live2d-widget-model-hijiki"></a>live2d-widget-model-hijiki</h3><img src="/2018/08/07/Config-Theme/live2d-widget-model-hijiki.png" title="live2d-widget-model-hijiki"><h3 id="live2d-widget-model-izumi"><a href="#live2d-widget-model-izumi" class="headerlink" title="live2d-widget-model-izumi"></a>live2d-widget-model-izumi</h3><img src="/2018/08/07/Config-Theme/live2d-widget-model-izumi.png" title="live2d-widget-model-izumi"><h3 id="llive2d-widget-model-koharu"><a href="#llive2d-widget-model-koharu" class="headerlink" title="llive2d-widget-model-koharu"></a>llive2d-widget-model-koharu</h3><img src="/2018/08/07/Config-Theme/live2d-widget-model-koharu.png" title="live2d-widget-model-koharu"><h3 id="live2d-widget-model-miku"><a href="#live2d-widget-model-miku" class="headerlink" title="live2d-widget-model-miku"></a>live2d-widget-model-miku</h3><img src="/2018/08/07/Config-Theme/live2d-widget-model-miku.png" title="live2d-widget-model-miku"><h3 id="live2d-widget-model-ni-j"><a href="#live2d-widget-model-ni-j" class="headerlink" title="live2d-widget-model-ni-j"></a>live2d-widget-model-ni-j</h3><img src="/2018/08/07/Config-Theme/live2d-widget-model-ni-j.png" title="live2d-widget-model-ni-j"><h3 id="live2d-widget-model-nico"><a href="#live2d-widget-model-nico" class="headerlink" title="live2d-widget-model-nico"></a>live2d-widget-model-nico</h3><img src="/2018/08/07/Config-Theme/live2d-widget-model-nico.png" title="live2d-widget-model-nico"><h3 id="live2d-widget-model-nipsilon"><a href="#live2d-widget-model-nipsilon" class="headerlink" title="live2d-widget-model-nipsilon"></a>live2d-widget-model-nipsilon</h3><img src="/2018/08/07/Config-Theme/live2d-widget-model-nipsilon.png" title="live2d-widget-model-nipsilon"><h3 id="live2d-widget-model-nito"><a href="#live2d-widget-model-nito" class="headerlink" title="live2d-widget-model-nito"></a>live2d-widget-model-nito</h3><img src="/2018/08/07/Config-Theme/live2d-widget-model-nito.png" title="live2d-widget-model-nito"><h3 id="live2d-widget-model-shizuku"><a href="#live2d-widget-model-shizuku" class="headerlink" title="live2d-widget-model-shizuku"></a>live2d-widget-model-shizuku</h3><img src="/2018/08/07/Config-Theme/live2d-widget-model-shizuku.png" title="live2d-widget-model-shizuku"><h3 id="live2d-widget-model-tororo"><a href="#live2d-widget-model-tororo" class="headerlink" title="live2d-widget-model-tororo"></a>live2d-widget-model-tororo</h3><img src="/2018/08/07/Config-Theme/live2d-widget-model-tororo.png" title="live2d-widget-model-tororo"><h3 id="live2d-widget-model-tsumiki"><a href="#live2d-widget-model-tsumiki" class="headerlink" title="live2d-widget-model-tsumiki"></a>live2d-widget-model-tsumiki</h3><img src="/2018/08/07/Config-Theme/live2d-widget-model-tsumiki.png" title="live2d-widget-model-tsumiki"><h3 id="live2d-widget-model-unitychan"><a href="#live2d-widget-model-unitychan" class="headerlink" title="live2d-widget-model-unitychan"></a>live2d-widget-model-unitychan</h3><img src="/2018/08/07/Config-Theme/live2d-widget-model-unitychan.png" title="live2d-widget-model-unitychan"><h3 id="live2d-widget-model-wanko"><a href="#live2d-widget-model-wanko" class="headerlink" title="live2d-widget-model-wanko"></a>live2d-widget-model-wanko</h3><img src="/2018/08/07/Config-Theme/live2d-widget-model-wanko.png" title="live2d-widget-model-wanko"><h3 id="live2d-widget-model-z16-png"><a href="#live2d-widget-model-z16-png" class="headerlink" title="live2d-widget-model-z16.png"></a>live2d-widget-model-z16.png</h3><img src="/2018/08/07/Config-Theme/live2d-widget-model-z16.png" title="live2d-widget-model-z16"><h2 id="添加网站访问统计"><a href="#添加网站访问统计" class="headerlink" title="添加网站访问统计"></a>添加网站访问统计</h2><p>引入js文件</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script <span class="keyword">async</span> src=<span class="string">"https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"</span>&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>在footer中添加如下代码：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"busuanzi_container_site_uv"</span>&gt;</span></span><br><span class="line">        Total <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"busuanzi_value_site_uv"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span> visitors.</span><br><span class="line">        <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--如果是文章页面则显示阅读统计&gt;--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">%</span> <span class="attr">if</span> (<span class="attr">is_post</span>()) &#123; %&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"busuanzi_container_page_pv"</span>&gt;</span></span><br><span class="line">        Total reading <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"busuanzi_value_page_pv"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span> times.</span><br><span class="line">        <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">%</span> &#125; %&gt;</span></span><br></pre></td></tr></table></figure><h2 id="添加博客时长"><a href="#添加博客时长" class="headerlink" title="添加博客时长"></a>添加博客时长</h2><p>在footer中添加博客时长，代码如下：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"timeDate"</span>&gt;</span>0<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"times"</span>&gt;</span>0<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>();</span></span><br><span class="line"><span class="javascript">            <span class="function"><span class="keyword">function</span> <span class="title">createtime</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> grt= <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="string">"06/06/2016 06:06:00"</span>);<span class="comment">//此处修改你的建站时间或者网站上线时间</span></span></span><br><span class="line"><span class="undefined">                now.setTime(now.getTime()+250);</span></span><br><span class="line"><span class="javascript">                days = (now - grt ) / <span class="number">1000</span> / <span class="number">60</span> / <span class="number">60</span> / <span class="number">24</span>; dnum = <span class="built_in">Math</span>.floor(days);</span></span><br><span class="line"><span class="javascript">                hours = (now - grt ) / <span class="number">1000</span> / <span class="number">60</span> / <span class="number">60</span> - (<span class="number">24</span> * dnum); hnum = <span class="built_in">Math</span>.floor(hours);</span></span><br><span class="line"><span class="javascript">                <span class="keyword">if</span>(<span class="built_in">String</span>(hnum).length ==<span class="number">1</span> )&#123;hnum = <span class="string">"0"</span> + hnum;&#125; minutes = (now - grt ) / <span class="number">1000</span> /<span class="number">60</span> - (<span class="number">24</span> * <span class="number">60</span> * dnum) - (<span class="number">60</span> * hnum);</span></span><br><span class="line"><span class="javascript">                mnum = <span class="built_in">Math</span>.floor(minutes); <span class="keyword">if</span>(<span class="built_in">String</span>(mnum).length ==<span class="number">1</span> )&#123;mnum = <span class="string">"0"</span> + mnum;&#125;</span></span><br><span class="line"><span class="undefined">                seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum);</span></span><br><span class="line"><span class="javascript">                snum = <span class="built_in">Math</span>.round(seconds); <span class="keyword">if</span>(<span class="built_in">String</span>(snum).length ==<span class="number">1</span> )&#123;snum = <span class="string">"0"</span> + snum;&#125;</span></span><br><span class="line"><span class="javascript">                <span class="built_in">document</span>.getElementById(<span class="string">"timeDate"</span>).innerHTML = <span class="string">"Blog age: "</span>+dnum+<span class="string">" day "</span>;</span></span><br><span class="line"><span class="javascript">                <span class="built_in">document</span>.getElementById(<span class="string">"times"</span>).innerHTML = hnum + <span class="string">" h "</span> + mnum + <span class="string">" m "</span> + snum + <span class="string">" s"</span>;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="javascript">            setInterval(<span class="string">"createtime()"</span>,<span class="number">250</span>);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>请注意将时间改为自己的时间。</p><h2 id="赞赏"><a href="#赞赏" class="headerlink" title="赞赏"></a>赞赏</h2><p>氪金？NoNoNo，这是对他人劳动的尊重。将以下代码添加到评论区的上方，需要将支付宝和微信的收款码替换成自己的：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span> =<span class="string">"post-donate"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"donate_board"</span> <span class="attr">class</span>=<span class="string">"donate_bar center"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">id</span>=<span class="string">"btn_donate"</span> <span class="attr">class</span>=<span class="string">"btn_donate"</span> <span class="attr">href</span>=<span class="string">"javascript:;"</span> <span class="attr">title</span>=<span class="string">"打赏"</span>&gt;</span>打脸赞赏戳这里OwO<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"donate_guide"</span> <span class="attr">class</span>=<span class="string">"donate_bar center hidden"</span> &gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 支付宝打赏图案 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"你的支付宝收款码图片"</span> <span class="attr">alt</span>=<span class="string">"支付宝打赏"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 微信打赏图案 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"你的微信收款码图片"</span> <span class="attr">alt</span>=<span class="string">"微信打赏"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> btnDonate = <span class="built_in">document</span>.getElementById(<span class="string">'btn_donate'</span>);</span></span><br><span class="line"><span class="javascript">        btnDonate.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> qr=<span class="built_in">document</span>.getElementById(<span class="string">"donate_guide"</span>);</span></span><br><span class="line"><span class="javascript">            <span class="keyword">if</span> (<span class="string">"none"</span>===qr.style.display) &#123;</span></span><br><span class="line"><span class="javascript">                qr.style.display=<span class="string">"block"</span></span></span><br><span class="line"><span class="javascript">                btnDonate.innerText = <span class="string">"我再想想-&gt;.-&gt;"</span></span></span><br><span class="line"><span class="javascript">            &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="javascript">                qr.style.display=<span class="string">"none"</span></span></span><br><span class="line"><span class="javascript">                btnDonate.innerText = <span class="string">"打脸赞赏戳这里OwO"</span></span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="在线聊天"><a href="#在线聊天" class="headerlink" title="在线聊天"></a>在线聊天</h2><p>通过daovoice可以很方便的浏览者进行在线聊天，进入<a href="http://www.daovoice.io/" target="_blank" rel="noopener">Daovoice</a>注册账号、然后创建一个聊天，如果需要邀请码的话可以使用：<code>2fc1f5b3</code>。后续操作如下：</p><ul><li><p>将下面代码粘贴在页面的  之前</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript">(<span class="function"><span class="keyword">function</span>(<span class="params">i,s,o,g,r,a,m</span>)</span>&#123;i[<span class="string">"DaoVoiceObject"</span>]=r;i[r]=i[r]||<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;(i[r].q=i[r].q||[]).push(<span class="built_in">arguments</span>)&#125;,i[r].l=<span class="number">1</span>*<span class="keyword">new</span> <span class="built_in">Date</span>();a=s.createElement(o),m=s.getElementsByTagName(o)[<span class="number">0</span>];a.async=<span class="number">1</span>;a.src=g;a.charset=<span class="string">"utf-8"</span>;m.parentNode.insertBefore(a,m)&#125;)(<span class="built_in">window</span>,<span class="built_in">document</span>,<span class="string">"script"</span>,(<span class="string">'https:'</span> == <span class="built_in">document</span>.location.protocol ? <span class="string">'https:'</span> : <span class="string">'http:'</span>) + <span class="string">"//widget.daovoice.io/widget/2fc1f5b3.js"</span>,<span class="string">"daovoice"</span>)</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>调用下面的 JavaScript 与匿名访客沟通（这里采用的是匿名沟通）</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">daovoice(<span class="string">'init'</span>, &#123;</span><br><span class="line">  app_id: <span class="string">"你的id"</span></span><br><span class="line">&#125;);</span><br><span class="line">daovoice(<span class="string">'update'</span>);</span><br></pre></td></tr></table></figure></li></ul><p>为了控制daovoice的打开和关闭，以及id的统一管理现将其抽出到themes下的config文件中去</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Online contact</span></span><br><span class="line"><span class="attr">daovoice:</span> <span class="literal">true</span> <span class="comment">#是否启用</span></span><br><span class="line"><span class="attr">daovoice_app_id:</span> <span class="string">你的id</span></span><br></pre></td></tr></table></figure><p>完整的配置为：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">%</span> <span class="attr">if</span> (<span class="attr">theme.daovoice</span>) &#123; %&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript">(<span class="function"><span class="keyword">function</span> (<span class="params">i, s, o, g, r, a, m</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            i[<span class="string">"DaoVoiceObject"</span>] = r;</span></span><br><span class="line"><span class="javascript">            i[r] = i[r] || <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                (i[r].q = i[r].q || []).push(<span class="built_in">arguments</span>)</span></span><br><span class="line"><span class="javascript">            &#125;, i[r].l = <span class="number">1</span> * <span class="keyword">new</span> <span class="built_in">Date</span>();</span></span><br><span class="line"><span class="undefined">            a = s.createElement(o), m = s.getElementsByTagName(o)[0];</span></span><br><span class="line"><span class="undefined">            a.async = 1;</span></span><br><span class="line"><span class="undefined">            a.src = g;</span></span><br><span class="line"><span class="javascript">            a.charset = <span class="string">"utf-8"</span>;</span></span><br><span class="line"><span class="undefined">            m.parentNode.insertBefore(a, m)</span></span><br><span class="line"><span class="javascript">        &#125;)(<span class="built_in">window</span>, <span class="built_in">document</span>, <span class="string">"script"</span>, (<span class="string">'https:'</span> == <span class="built_in">document</span>.location.protocol ? <span class="string">'https:'</span> : <span class="string">'http:'</span>) + <span class="string">"//widget.daovoice.io/widget/0ba5a2ce.js"</span>, <span class="string">"daovoice"</span>)</span></span><br><span class="line"><span class="javascript">        daovoice(<span class="string">'init'</span>, &#123;</span></span><br><span class="line"><span class="javascript">            app_id: <span class="string">"&lt;%=theme.daovoice_app_id %&gt;"</span></span></span><br><span class="line"><span class="undefined">        &#125;);</span></span><br><span class="line"><span class="javascript">        daovoice(<span class="string">'update'</span>);</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">%</span> &#125; %&gt;</span></span><br></pre></td></tr></table></figure><p>其它的daovoice配置，可在dashboard页面中进行设置。</p><h2 id="添加版权信息"><a href="#添加版权信息" class="headerlink" title="添加版权信息"></a>添加版权信息</h2><p>新建<code>themes/tranquilpeak/layout/_partial/post/copyright.ejs</code>文件：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">%</span> <span class="attr">if</span> (<span class="attr">page.copyright</span>) &#123; %&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"my_post_copyright"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- JS库 sweetalert 可修改路径 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcss.com/jquery/2.0.0/jquery.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://unpkg.com/sweetalert/dist/sweetalert.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>本文标题:<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"&lt;%= url_for(page.path) %&gt;"</span>&gt;</span><span class="tag">&lt;<span class="name">%=</span> <span class="attr">page.title</span> %&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>文章作者:<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/"</span> <span class="attr">title</span>=<span class="string">"访问 &lt;%= config.copyright %&gt; 的个人博客"</span>&gt;</span><span class="tag">&lt;<span class="name">%=</span> <span class="attr">config.copyright</span> %&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>发布时间:<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">%=</span> <span class="attr">page.date.format</span>("<span class="attr">YYYY</span>年<span class="attr">MM</span>月<span class="attr">DD</span>日 <span class="attr">-</span> <span class="attr">HH:MM</span>") %&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>最后更新:<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">%=</span> <span class="attr">page.updated.format</span>("<span class="attr">YYYY</span>年<span class="attr">MM</span>月<span class="attr">DD</span>日 <span class="attr">-</span> <span class="attr">HH:MM</span>") %&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>原始链接:<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"&lt;%= url_for(page.path) %&gt;"</span> <span class="attr">title</span>=<span class="string">"page.title"</span>&gt;</span><span class="tag">&lt;<span class="name">%=</span> <span class="attr">page.permalink</span> %&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"copy-path"</span>  <span class="attr">title</span>=<span class="string">"点击复制文章链接"</span>&gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"fa fa-clipboard"</span> <span class="attr">data-clipboard-text</span>=<span class="string">"&lt;%=  page.permalink %&gt;"</span>  <span class="attr">aria-label</span>=<span class="string">"复制成功！"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>许可协议:<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"fab fa-creative-commons"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> <span class="tag">&lt;<span class="name">a</span> <span class="attr">rel</span>=<span class="string">"license"</span> <span class="attr">href</span>=<span class="string">"https://creativecommons.org/licenses/by-nc-nd/4.0/"</span> <span class="attr">target</span>=<span class="string">"_blank"</span> <span class="attr">title</span>=<span class="string">"Attribution-NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0)"</span>&gt;</span>署名-非商业性使用-禁止演绎 4.0 国际<span class="tag">&lt;/<span class="name">a</span>&gt;</span> 转载请保留原文链接及作者。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> clipboard = <span class="keyword">new</span> Clipboard(<span class="string">'.fa-clipboard'</span>);</span></span><br><span class="line"><span class="javascript">    $(<span class="string">".fa-clipboard"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">        clipboard.on(<span class="string">'success'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="undefined">            swal(&#123;</span></span><br><span class="line"><span class="javascript">                title: <span class="string">""</span>,</span></span><br><span class="line"><span class="javascript">                text: <span class="string">'复制成功'</span>,</span></span><br><span class="line"><span class="javascript">                icon: <span class="string">"success"</span>,</span></span><br><span class="line"><span class="javascript">                showConfirmButton: <span class="literal">true</span></span></span><br><span class="line"><span class="undefined">            &#125;);</span></span><br><span class="line"><span class="undefined">        &#125;);</span></span><br><span class="line"><span class="undefined">    &#125;);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">%</span> &#125; %&gt;</span></span><br></pre></td></tr></table></figure><p>样式为：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.my_post_copyright</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">85%</span>;</span><br><span class="line">  <span class="attribute">max-width</span>: <span class="number">45em</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">2em</span> auto <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">2em</span>;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">2em</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0.5em</span> <span class="number">1.0em</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#d3d3d3</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">1.7rem</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">1.6em</span>;</span><br><span class="line">  <span class="attribute">word-break</span>: break-all;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(255, 255, 255, 0.4);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.my_post_copyright</span> <span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.my_post_copyright</span> <span class="selector-tag">span</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">5.2em</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#b5b5b5</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: bold;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.my_post_copyright</span> <span class="selector-class">.raw</span> &#123;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">1em</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">5em</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.my_post_copyright</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#808080</span>;</span><br><span class="line">  <span class="attribute">border-bottom</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.my_post_copyright</span> <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#349ef3</span>;</span><br><span class="line">  <span class="attribute">text-decoration</span>: underline;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.my_post_copyright</span><span class="selector-pseudo">:hover</span> <span class="selector-class">.fa-clipboard</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#000</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.my_post_copyright</span> <span class="selector-class">.post-url</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">font-weight</span>: normal;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.my_post_copyright</span> <span class="selector-class">.copy-path</span> &#123;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">1em</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">1em</span>;</span><br><span class="line">+ mobile() &#123;</span><br><span class="line">  <span class="selector-tag">display</span>: <span class="selector-tag">none</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.my_post_copyright</span> <span class="selector-class">.copy-path</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#808080</span>;</span><br><span class="line">  <span class="attribute">cursor</span>: pointer;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>然后添加到文章列表内容的底部和品论框的上面<code>&lt;%- partial(&#39;post/copyright&#39;) %&gt;</code>。</p><h1 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h1><p>本次只是列出了自己用到的一些配置，如果你还有需要可以根据自己需求添加，好了，下次再见。</p>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;主题配置&quot;&gt;&lt;a href=&quot;#主题配置&quot; class=&quot;headerlink&quot; title=&quot;主题配置&quot;&gt;&lt;/a&gt;主题配置&lt;/h1&gt;&lt;p&gt;上次主要是对主题的使用作下简答的说明，现在说的是主题的美化，注意此处讨论的主题为&lt;a href=&quot;https://github.com/yangshanlin/hexo-theme-tranquilpeak&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Tranquilpeak&lt;/a&gt;，如有不适请自行Google。&lt;br&gt;
    
    </summary>
    
    
      <category term="Other" scheme="http://blog.yangshanlin.cn/tags/Other/"/>
    
  </entry>
  
  <entry>
    <title>第一弹</title>
    <link href="http://blog.yangshanlin.cn/2018/08/03/Quick-Start/"/>
    <id>http://blog.yangshanlin.cn/2018/08/03/Quick-Start/</id>
    <published>2018-08-03T08:43:00.000Z</published>
    <updated>2018-08-11T15:29:40.602Z</updated>
    
    <content type="html"><![CDATA[<h1 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h1><p>本来很早就打算打整一下<code>Github Pages</code>，一来没有发现自己中意的主题，二来也怪自己太懒，所以计划一直搁浅。<br><a id="more"></a><br>其实，这次算是二次折腾，以前折腾过一次，但是不是很满意，这几天突然发现了自己满意的主题，于是便推翻重来！好了，话不多说，开整~。</p><h1 id="Hexo"><a href="#Hexo" class="headerlink" title="Hexo"></a>Hexo</h1><p>本次框架采用的是<code>Hexo</code>，一开始的时候用过<code>jekyll</code>，但最终采用了<code>Hexo</code>，<code>Hexo</code>官方说：<code>快速、简洁且高效的博客框架</code>，果断入坑。本文也不打算从安装说起，快速入门可参考官方文档，<a href="http://hexo.io/zh-cn/docs" target="_blank" rel="noopener">传送门</a>。</p><h1 id="主题"><a href="#主题" class="headerlink" title="主题"></a>主题</h1><p>嗯~，感觉说到正事上来了，本次主要折腾的是主题。找过一段时间的主题，但是也没发现自己满意的主题（感觉自己的时间都浪费在了找主题上面- . -），最后还是找了几款不错的主题，可参考文末链接。本文主要采用的主题是<a href="https://github.com/LouisBarranqueiro/hexo-theme-tranquilpeak" target="_blank" rel="noopener">Tranquilpeak</a>，最开始采用的是<a href="https://github.com/kaedea/hexo-theme-themia" target="_blank" rel="noopener">Themia</a>，而<a href="https://github.com/kaedea/hexo-theme-themia" target="_blank" rel="noopener">Themia</a>最开始也是基于<a href="https://github.com/LouisBarranqueiro/hexo-theme-tranquilpeak" target="_blank" rel="noopener">Tranquilpeak</a>进行的二次开发，但我最近发现原作者对<a href="https://github.com/LouisBarranqueiro/hexo-theme-tranquilpeak" target="_blank" rel="noopener">Tranquilpeak</a>进行了修改，于是使用了<a href="https://github.com/LouisBarranqueiro/hexo-theme-tranquilpeak" target="_blank" rel="noopener">Tranquilpeak</a>并在上面进行了修改，而修改的样式参照了<a href="https://blog.codeest.moe/" target="_blank" rel="noopener">https://blog.codeest.moe/</a>。另外本文所采用的主题版本为<a href="https://github.com/LouisBarranqueiro/hexo-theme-tranquilpeak/releases/tag/v3.0.0" target="_blank" rel="noopener">v3.0.0</a>，如果采用不同的版本可能会出现不同的问题，建议采用和本文同步的版本。</p><h2 id="一些坑"><a href="#一些坑" class="headerlink" title="一些坑"></a>一些坑</h2><p>在主题的配置过程中也遇到了一些坑：</p><ul><li>本地的favicon无法显示。</li><li>coverImage和thumbnailImage无法显示。</li><li>一些icon无法显示。</li><li>修改主题的坑。</li></ul><h3 id="本地的favicon无法显示"><a href="#本地的favicon无法显示" class="headerlink" title="本地的favicon无法显示"></a>本地的favicon无法显示</h3><p>hexo根目录下的<code>_config.yml</code>文件中的url属性会影响<code>favicon</code>的加载：<br><code>http://127.0.0.1:4000/assets/images/favicon.ico</code>其中的<code>http://127.0.0.1:4000</code>就是在根目录下的<code>_config.yml</code>url属性，此时如果将其改为<code>https://yanghsanlin.com</code>最终生成的url为<code>https://yanghsanlin.com/assets/images/favicon.ico</code>从而显示不出favicon。</p><h4 id="解决方法一"><a href="#解决方法一" class="headerlink" title="解决方法一"></a>解决方法一</h4><p>修改themes/tranquilpeak/layout/_partial/head.ejs</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;%</span><br><span class="line">//...</span><br><span class="line"></span><br><span class="line">//定义favicon变量</span><br><span class="line">var favicon = null;</span><br><span class="line"></span><br><span class="line">    // 如果是远程链接则直接返回</span><br><span class="line">    if (is_remote_url(theme.favicon)) &#123;</span><br><span class="line">        favicon = theme.favicon;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">    //是本地的相对地址则使用相对地址生成图片地址</span><br><span class="line">        favicon = url_for(theme.image_dir + &apos;/&apos; + theme.favicon);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">%&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line"></span><br><span class="line"> &lt;% if (theme.favicon) &#123; %&gt;</span><br><span class="line"> &lt;!--在此处使用 favicon变量--&gt;</span><br><span class="line">        &lt;link rel=&quot;icon&quot; href=&quot;&lt;%= favicon %&gt;&quot;&gt;</span><br><span class="line">    &lt;% &#125; %&gt;</span><br><span class="line">&lt;/head&gt;</span><br></pre></td></tr></table></figure><h4 id="解决方法二"><a href="#解决方法二" class="headerlink" title="解决方法二"></a>解决方法二</h4><p>新建<code>relative_url.js</code>，其对应的地址如下。<br>themes/tranquilpeak/scripts/helpers/relative_url.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Resolve asset relativeurl</span></span><br><span class="line"><span class="comment"> * @param url</span></span><br><span class="line"><span class="comment"> * @param from</span></span><br><span class="line"><span class="comment"> * @returns &#123;String&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">hexo.extend.helper.register(<span class="string">'relative_url'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">from, url</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// check if url is remote</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.is_remote_url(url)) &#123;</span><br><span class="line">        <span class="keyword">return</span> url;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// generate an URL from the one given</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.url_for(<span class="keyword">from</span> + <span class="string">"/"</span> + url);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>修改themes/tranquilpeak/layout/_partial/head.ejs</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;head&gt;</span><br><span class="line"></span><br><span class="line"> &lt;% if (theme.favicon) &#123; %&gt;</span><br><span class="line"> &lt;!--在此处使用 favicon变量--&gt;</span><br><span class="line">        link rel=&quot;icon&quot; href=&quot;&lt;%= relative_url(theme.image_dir, theme.favicon) %&gt;&quot;&gt;</span><br><span class="line">    &lt;% &#125; %&gt;</span><br><span class="line">&lt;/head&gt;</span><br></pre></td></tr></table></figure><p>hexo的某些主题样式修改需要进行编译过后才能生效，比如hexo，此时的资源文件需要新放入<code>sources/_images/</code>目录下，然后在主题目录下运行<code>npm run prod</code>会将文件拷贝到<code>sources/assets/images/</code>。</p><h4 id="coverImage和thumbnailImage无法显示"><a href="#coverImage和thumbnailImage无法显示" class="headerlink" title="coverImage和thumbnailImage无法显示"></a>coverImage和thumbnailImage无法显示</h4><p>这个其实和上面的favicon显示问题一样。也只是对路径引用进行了修改。具体可参考<a href="https://github.com/yangshanlin/hexo-theme-tranquilpeak" target="_blank" rel="noopener">源码</a>。</p><h4 id="一些icon无法显示"><a href="#一些icon无法显示" class="headerlink" title="一些icon无法显示"></a>一些icon无法显示</h4><p>这个其实不算很坑，原作者已经在其升级日这里面进行了说明。而我们只需要到<a href="https://fontawesome.com/icons?d=gallery&amp;m=free" target="_blank" rel="noopener">Font Awesome v5 - icons</a>用最新的icon替换即可。但是注意<code>themes/tranquilpeak/layout/_partial/post/actions.ejs</code>文件中对icon的遍历时添加了统一前缀<code>fa</code>，导致配置的icon无法显示。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;% for(var option in theme.sharing_options)  &#123;%&gt;</span><br><span class="line">            &lt;% var icon = theme.sharing_options[option].icon %&gt;</span><br><span class="line">            &lt;% var url = generate_sharing_link(post, theme.sharing_options[option].url) %&gt;</span><br><span class="line">            &lt;li class=&quot;post-action hide-xs&quot;&gt;</span><br><span class="line">                &lt;a class=&quot;post-action-btn btn btn--default&quot; target=&quot;new&quot; href=&quot;&lt;%= url %&gt;&quot; title=&quot;&lt;%= __(&apos;global.share_on_&apos; + option) %&gt;&quot;&gt;</span><br><span class="line">                    &lt;i class=&quot;fa &lt;%= icon %&gt;&quot; aria-hidden=&quot;true&quot;&gt;&lt;/i&gt;</span><br><span class="line">                &lt;/a&gt;</span><br><span class="line">            &lt;/li&gt;</span><br><span class="line">        &lt;% &#125; %&gt;</span><br></pre></td></tr></table></figure><p>修改后如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;% for(var option in theme.sharing_options)  &#123;%&gt;</span><br><span class="line">           &lt;% var icon = theme.sharing_options[option].icon %&gt;</span><br><span class="line">           &lt;% var url = generate_sharing_link(post, theme.sharing_options[option].url) %&gt;</span><br><span class="line">           &lt;li class=&quot;post-action hide-xs&quot;&gt;</span><br><span class="line">               &lt;a class=&quot;post-action-btn btn btn--default&quot; target=&quot;new&quot; href=&quot;&lt;%= url %&gt;&quot; title=&quot;&lt;%= __(&apos;global.share_on_&apos; + option) %&gt;&quot;&gt;</span><br><span class="line">                   &lt;i class=&quot;&lt;%= icon %&gt;&quot; aria-hidden=&quot;true&quot;&gt;&lt;/i&gt;</span><br><span class="line">               &lt;/a&gt;</span><br><span class="line">           &lt;/li&gt;</span><br><span class="line">       &lt;% &#125; %&gt;</span><br></pre></td></tr></table></figure><p>此时基本上及达到了我想要的效果。</p><h4 id="修改主题的坑"><a href="#修改主题的坑" class="headerlink" title="修改主题的坑"></a>修改主题的坑</h4><p>其实这个不算是坑，关键是自己对前端技术的不熟悉导致的，就是主题修改后必须重新编译运行才能生效，如果是直接下载的<code>release</code>版需要对主题进行修改的话就需要执行<code>npm install</code>命令安装全部的依赖。最后就是修改的主题后需要执行<code>npm run prod</code>（是在主题目录下）命令，整个过程如下：</p><ul><li>修改主题样式</li><li>执行<code>npm run prod</code>使修改的主题生效</li><li>最后在项目根目录依次执行<code>hexo clean</code>，<code>hexo g</code>，<code>hexo s</code></li></ul><h1 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h1><p>本次其实是简单的主题配置问题，后续会继续完善主题的美化工作。</p>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;写在前面&quot;&gt;&lt;a href=&quot;#写在前面&quot; class=&quot;headerlink&quot; title=&quot;写在前面&quot;&gt;&lt;/a&gt;写在前面&lt;/h1&gt;&lt;p&gt;本来很早就打算打整一下&lt;code&gt;Github Pages&lt;/code&gt;，一来没有发现自己中意的主题，二来也怪自己太懒，所以计划一直搁浅。&lt;br&gt;
    
    </summary>
    
    
      <category term="Other" scheme="http://blog.yangshanlin.cn/tags/Other/"/>
    
  </entry>
  
</feed>
